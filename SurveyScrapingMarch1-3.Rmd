---
title: "SurveyScrapingMarch1-3"
author: "Nate Stephens"
date: "3/18/2020"
output: html_document
---

```{r}
library(tidyverse)
library(pdftools)
library(rvest)
library(rJava)
Sys.setenv(JAVA_HOME="C:/Program Files/Java/jre1.8.0_241")
library(tabulizer)
```

How closely are you following the news about coronavirus?
```{r}
df_results <- extract_tables("https://d25d2506sfb94s.cloudfront.net/cumulus_uploads/document/3rdraw493c/econTabReport.pdf", pages = 30)

#Education
df1 <- df_results[[1]] %>% as_tibble() 
  
df2 = df1 %>% unite(Education, 5:6, sep = " ") %>% 
  separate(V3, c("New1", "New2", "New3"), sep = " ") %>% 
  unite(Education, c(5,7), sep = " ")

x1 = df2$V1[1:8]
x2 = df2$V2[1:8]
x3 = df2$Education[1:8]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.edu.table1 = clean1 %>% separate(col = x3, into = c("HS or less", "Some college", "College Grad", "Postgrad"), sep = " ") %>% rename(Total = x2)
cleaned.edu.table1

#Gender
df3 = df1 %>% separate(V3, c("New1", "New2"), sep = " ")


x1 = df3$V1[1:8]
x2 = df3$V2[1:8]
x3 = df3$New1[1:8]
x4 = df3$New2[1:8]

clean1 = tibble(x1,x2,x3, x4)
clean1 = clean1[-c(1,2),]

cleaned.gender.table1 = clean1 %>% rename(Total = x2, Male = x3, Female = x4)
cleaned.gender.table1

#Income
df4 = df1 %>% unite(Income, 7:9, sep = " ")

x1 = df4$V1[1:8]
x2 = df4$V2[1:8]
x3 = df4$Income[1:8]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.income.table1 = clean1 %>% separate(col = x3, into = c("Under $50k", "$50-100K", "$100K or more"), sep = " ") %>% rename(Total = x2)
cleaned.income.table1

#Age
df5 = df1 %>% 
  separate(V5, c("New1", "New2"), sep = " ") %>% 
  unite(Age, c(3,5), sep = " ")


x1 = df5$V1[9:16]
x2 = df5$V2[9:16]
x3 = df5$Age[9:16]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.age.table1 = clean1 %>% separate(col = x3, into = c("18-29", "30-44", "45-64", "65+"), sep = " ") %>% rename(Total = x2)
cleaned.age.table1

#Race
df6 = df1 %>%
  unite(V5, c(V5, V6), sep = " ") %>% 
  separate(V5, c("New1", "New2", "New3", "New4"), sep = " ")

df6 = df6 %>% 
  unite(Race, 5:8, sep = " ")

x1 = df6$V1[9:16]
x2 = df6$V2[9:16]
x3 = df6$Race[9:16]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.race.table1 = clean1 %>% separate(col = x3, into = c("White", "Black", "Hispanic", "Other"), sep = " ") %>% rename(Total = x2)
cleaned.race.table1

#Region
df7 = df1 %>% 
  unite(Region, 7:9, sep = " ")


x1 = df7$V1[9:16]
x2 = df7$V2[9:16]
x3 = df7$Region[9:16]

clean1 = tibble(x1,x2,x3)

clean1 = clean1[-c(1,2),]

cleaned.region.table1 = clean1 %>% separate(col = x3, into = c("Northeast", "Midwest", "South", "West"), sep = " ") %>% rename(Total = x2)
cleaned.region.table1

```

Do you approve or disapprove of Donald Trump’s handling of the coronavirus outbreak?
```{r}
df_results <- extract_tables("https://d25d2506sfb94s.cloudfront.net/cumulus_uploads/document/3rdraw493c/econTabReport.pdf", pages = 32)

#Education
df1 <- df_results[[1]] %>% as_tibble() 
  
df2 = df1 %>% unite(Education, 5:6, sep = " ") %>% 
  separate(V3, c("New1", "New2", "New3"), sep = " ") %>% 
  unite(Education, c(5,7), sep = " ")

x1 = df2$V1[1:9]
x2 = df2$V2[1:9]
x3 = df2$Education[1:9]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.edu.table2 = clean1 %>% separate(col = x3, into = c("HS or less", "Some college", "College Grad", "Postgrad"), sep = " ") %>% rename(Total = x2)
cleaned.edu.table2

#Gender
df3 = df1 %>% separate(V3, c("New1", "New2"), sep = " ")

x1 = df3$V1[1:9]
x2 = df3$V2[1:9]
x3 = df3$New1[1:9]
x4 = df3$New2[1:9]

clean1 = tibble(x1,x2,x3, x4)

clean1 = clean1[-c(1,2),]

cleaned.gender.table2 = clean1 %>% rename(Total = x2, Male = x3, Female = x4)
cleaned.gender.table2

#Income
df4 = df1 %>% unite(Income, 7:9, sep = " ")

x1 = df4$V1[1:9]
x2 = df4$V2[1:9]
x3 = df4$Income[1:9]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.income.table2 = clean1 %>% separate(col = x3, into = c("Under $50k", "$50-100K", "$100K or more"), sep = " ") %>% rename(Total = x2)
cleaned.income.table2

#Age
df5 = df1 %>% 
  separate(V5, c("New1", "New2"), sep = " ") %>% 
  unite(Age, c(3,5), sep = " ")

x1 = df5$V1[10:18]
x2 = df5$V2[10:18]
x3 = df5$Age[10:18]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.age.table2 = clean1 %>% separate(col = x3, into = c("18-29", "30-44", "45-64", "65+"), sep = " ") %>% rename(Total = x2)
cleaned.age.table2

#Race
df6 = df1 %>% 
  separate(V5, c("New1", "New2", "New3", "New4"), sep = " ")
#All this is necessary to reshift the bottom 2 rows
df6[17,8] = df6[17,7]
df6[18,8] = df6[18,7]
df6[17,7] = df6[17,6]
df6[18,7] = df6[18,6]
df6[17,6] = df6[17,5]
df6[18,6] = df6[18,5]

df6 = df6 %>% 
  unite(Race, 6:9, sep = " ")

x1 = df6$V1[10:18]
x2 = df6$V2[10:18]
x3 = df6$Race[10:18]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.race.table2 = clean1 %>% separate(col = x3, into = c("White", "Black", "Hispanic", "Other"), sep = " ") %>% rename(Total = x2)
cleaned.race.table2

#Region
df7 = df1 %>% 
  unite(Region, 7:9, sep = " ")

x1 = df7$V1[10:18]
x2 = df7$V2[10:18]
x3 = df7$Region[10:18]

clean1 = tibble(x1,x2,x3)

clean1 = clean1[-c(1,2),]

cleaned.region.table2 = clean1 %>% separate(col = x3, into = c("Northeast", "Midwest", "South", "West"), sep = " ") %>% rename(Total = x2)
cleaned.region.table2
```

Do you approve or disapprove of Donald Trump placing Vice President Mike Pence in charge of the federal government’s response to the spread of the coronavirus?
```{r}
df_results <- extract_tables("https://d25d2506sfb94s.cloudfront.net/cumulus_uploads/document/3rdraw493c/econTabReport.pdf", pages = 34)

#Education
df1 <- df_results[[1]] %>% as_tibble() 
  
df2 = df1 %>% unite(Education, 5:6, sep = " ") %>% 
  separate(V3, c("New1", "New2", "New3"), sep = " ") %>% 
  unite(Education, c(5,7), sep = " ")

x1 = df2$V1[1:9]
x2 = df2$V2[1:9]
x3 = df2$Education[1:9]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.edu.table3 = clean1 %>% separate(col = x3, into = c("HS or less", "Some college", "College Grad", "Postgrad"), sep = " ") %>% rename(Total = x2)
cleaned.edu.table3

#Gender
df3 = df1 %>% separate(V3, c("New1", "New2"), sep = " ")

x1 = df3$V1[1:9]
x2 = df3$V2[1:9]
x3 = df3$New1[1:9]
x4 = df3$New2[1:9]

clean1 = tibble(x1,x2,x3, x4)

clean1 = clean1[-c(1,2),]

cleaned.gender.table3 = clean1 %>% rename(Total = x2, Male = x3, Female = x4)
cleaned.gender.table3

#Income
df4 = df1 %>% unite(Income, 7:9, sep = " ")

x1 = df4$V1[1:9]
x2 = df4$V2[1:9]
x3 = df4$Income[1:9]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.income.table3 = clean1 %>% separate(col = x3, into = c("Under $50k", "$50-100K", "$100K or more"), sep = " ") %>% rename(Total = x2)
cleaned.income.table3

#Age
df5 = df1 %>% 
  separate(V5, c("New1", "New2"), sep = " ") %>% 
  unite(Age, c(3,5), sep = " ")

x1 = df5$V1[10:18]
x2 = df5$V2[10:18]
x3 = df5$Age[10:18]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.age.table3 = clean1 %>% separate(col = x3, into = c("18-29", "30-44", "45-64", "65+"), sep = " ") %>% rename(Total = x2)
cleaned.age.table3

#Race
df6 = df1 %>% 
  separate(V5, c("New1", "New2", "New3", "New4"), sep = " ")
#All this is necessary to reshift the bottom 2 rows
df6[17,8] = df6[17,7]
df6[18,8] = df6[18,7]
df6[17,7] = df6[17,6]
df6[18,7] = df6[18,6]
df6[17,6] = df6[17,5]
df6[18,6] = df6[18,5]

df6 = df6 %>% 
  unite(Race, 6:9, sep = " ")

x1 = df6$V1[10:18]
x2 = df6$V2[10:18]
x3 = df6$Race[10:18]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.race.table3 = clean1 %>% separate(col = x3, into = c("White", "Black", "Hispanic", "Other"), sep = " ") %>% rename(Total = x2)
cleaned.race.table3

#Region
df7 = df1 %>% 
  unite(Region, 7:9, sep = " ")

x1 = df7$V1[10:18]
x2 = df7$V2[10:18]
x3 = df7$Region[10:18]

clean1 = tibble(x1,x2,x3)

clean1 = clean1[-c(1,2),]

cleaned.region.table3 = clean1 %>% separate(col = x3, into = c("Northeast", "Midwest", "South", "West"), sep = " ") %>% rename(Total = x2)
cleaned.region.table3
```



Do you think the federal government should be increasing or decreasing the amount of money it spends on preventing the spread of infectious diseases, or do you think it currently spends about the right amount?
```{r}
df_results <- extract_tables("https://d25d2506sfb94s.cloudfront.net/cumulus_uploads/document/3rdraw493c/econTabReport.pdf", pages = 36)

#Education
df1 <- df_results[[1]] %>% as_tibble() 
  
df2 = df1 %>% unite(Education, 5:6, sep = " ") %>% 
  separate(V3, c("New1", "New2", "New3"), sep = " ") %>% 
  unite(Education, c(5,7), sep = " ")

x1 = df2$V1[1:8]
x2 = df2$V2[1:8]
x3 = df2$Education[1:8]

clean1 = tibble(x1,x2,x3)
#This is need due to the fact that one of the things is spread out over 2 rows
clean1[6,1] = paste(clean1[5,1],clean1[6,1])
clean1 = clean1[-c(5,1,2),]

cleaned.edu.table4 = clean1 %>% separate(col = x3, into = c("HS or less", "Some college", "College Grad", "Postgrad"), sep = " ") %>% rename(Total = x2)
cleaned.edu.table4

#Gender
df3 = df1 %>% separate(V3, c("New1", "New2"), sep = " ")

x1 = df3$V1[1:8]
x2 = df3$V2[1:8]
x3 = df3$New1[1:8]
x4 = df3$New2[1:8]

clean1 = tibble(x1,x2,x3, x4)

clean1[6,1] = paste(clean1[5,1],clean1[6,1])
clean1 = clean1[-c(5,1,2),]

cleaned.gender.table4 = clean1 %>% rename(Total = x2, Male = x3, Female = x4)
cleaned.gender.table4

#Income
df4 = df1 %>% unite(Income, 7:9, sep = " ")

x1 = df4$V1[1:8]
x2 = df4$V2[1:8]
x3 = df4$Income[1:8]

clean1 = tibble(x1,x2,x3)
#This is need due to the fact that one of the responses is spread out over 2 rows
clean1[6,1] = paste(clean1[5,1],clean1[6,1])
clean1 = clean1[-c(5,1,2),]

cleaned.income.table4 = clean1 %>% separate(col = x3, into = c("Under $50k", "$50-100K", "$100K or more"), sep = " ") %>% rename(Total = x2)
cleaned.income.table4

#Age
df5 = df1 %>% 
  separate(V5, c("New1", "New2"), sep = " ") %>% 
  unite(Age, c(3,5), sep = " ")

x1 = df5$V1[9:16]
x2 = df5$V2[9:16]
x3 = df5$Age[9:16]

clean1 = tibble(x1,x2,x3)
#This is need due to the fact that one of the responses is spread out over 2 rows
clean1[6,1] = paste(clean1[5,1],clean1[6,1])
clean1 = clean1[-c(5,1,2),]

cleaned.age.table4 = clean1 %>% separate(col = x3, into = c("18-29", "30-44", "45-64", "65+"), sep = " ") %>% rename(Total = x2)
cleaned.age.table4

#Race
df6 = df1 %>% 
  separate(V5, c("New1", "New2", "New3", "New4"), sep = " ") 

df6[15,8] = df6[15,7]
df6[16,8] = df6[16,7]
df6[15,7] = df6[15,6]
df6[16,7] = df6[16,6]
df6[15,6] = df6[15,5]
df6[16,6] = df6[16,5]

df6 = df6 %>% 
  unite(Race, 6:9, sep = " ")

x1 = df6$V1[9:16]
x2 = df6$V2[9:16]
x3 = df6$Race[9:16]

clean1 = tibble(x1,x2,x3)
#This is need due to the fact that one of the responses is spread out over 2 rows
clean1[6,1] = paste(clean1[5,1],clean1[6,1])
clean1 = clean1[-c(5,1,2),]

cleaned.race.table4 = clean1 %>% separate(col = x3, into = c("White", "Black", "Hispanic", "Other"), sep = " ") %>% rename(Total = x2)
cleaned.race.table4

#Region
df7 = df1 %>% 
  unite(Region, 7:9, sep = " ")

x1 = df7$V1[9:16]
x2 = df7$V2[9:16]
x3 = df7$Region[9:16]

clean1 = tibble(x1,x2,x3)
#This is need due to the fact that one of the responses is spread out over 2 rows
clean1[6,1] = paste(clean1[5,1],clean1[6,1])
clean1 = clean1[-c(5,1,2),]

cleaned.region.table4 = clean1 %>% separate(col = x3, into = c("Northeast", "Midwest", "South", "West"), sep = " ") %>% rename(Total = x2)
cleaned.region.table4
```

How concerned are you about a coronavirus epidemic here in the United States?
```{r}
df_results <- extract_tables("https://d25d2506sfb94s.cloudfront.net/cumulus_uploads/document/3rdraw493c/econTabReport.pdf", pages = 38)

#Education
df1 <- df_results[[1]] %>% as_tibble() 
  
df2 = df1 %>% unite(Education, 5:6, sep = " ") %>% 
  separate(V3, c("New1", "New2", "New3"), sep = " ") %>% 
  unite(Education, c(5,7), sep = " ")

x1 = df2$V1[1:8]
x2 = df2$V2[1:8]
x3 = df2$Education[1:8]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.edu.table5 = clean1 %>% separate(col = x3, into = c("HS or less", "Some college", "College Grad", "Postgrad"), sep = " ") %>% rename(Total = x2)
cleaned.edu.table5

#Gender
df3 = df1 %>% separate(V3, c("New1", "New2"), sep = " ")


x1 = df3$V1[1:8]
x2 = df3$V2[1:8]
x3 = df3$New1[1:8]
x4 = df3$New2[1:8]

clean1 = tibble(x1,x2,x3, x4)
clean1 = clean1[-c(1,2),]

cleaned.gender.table5 = clean1 %>% rename(Total = x2, Male = x3, Female = x4)
cleaned.gender.table5

#Income
df4 = df1 %>% unite(Income, 7:9, sep = " ")

x1 = df4$V1[1:8]
x2 = df4$V2[1:8]
x3 = df4$Income[1:8]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]



cleaned.income.table5 = clean1 %>% separate(col = x3, into = c("Under $50k", "$50-100K", "$100K or more"), sep = " ") %>% rename(Total = x2)
cleaned.income.table5

#Age
df5 = df1 %>% 
  separate(V5, c("New1", "New2"), sep = " ") %>% 
  unite(Age, c(3,5), sep = " ")


x1 = df5$V1[9:16]
x2 = df5$V2[9:16]
x3 = df5$Age[9:16]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.age.table5 = clean1 %>% separate(col = x3, into = c("18-29", "30-44", "45-64", "65+"), sep = " ") %>% rename(Total = x2)
cleaned.age.table5

#Race
df6 = df1 %>%
  unite(V5, c(V5, V6), sep = " ")
#This deletes a 6% that was there by mistake
df6$V5[14] <- gsub("^.{0,3}", "", df6$V5[14])

df6 = df6 %>% 
  separate(V5, c("New1", "New2", "New3", "New4"), sep = " ")

df6 = df6 %>% 
  unite(Race, 5:8, sep = " ")

x1 = df6$V1[9:16]
x2 = df6$V2[9:16]
x3 = df6$Race[9:16]

clean1 = tibble(x1,x2,x3)
clean1 = clean1[-c(1,2),]

cleaned.race.table5 = clean1 %>% separate(col = x3, into = c("White", "Black", "Hispanic", "Other"), sep = " ") %>% rename(Total = x2)
cleaned.race.table5

#Region
df7 = df1 %>% 
  unite(Region, 7:9, sep = " ")


x1 = df7$V1[9:16]
x2 = df7$V2[9:16]
x3 = df7$Region[9:16]

clean1 = tibble(x1,x2,x3)

clean1 = clean1[-c(1,2),]

cleaned.region.table5 = clean1 %>% separate(col = x3, into = c("Northeast", "Midwest", "South", "West"), sep = " ") %>% rename(Total = x2)
cleaned.region.table5
```

